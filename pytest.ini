[pytest]
# Опции командной строки по умолчанию
# -sv: показывать stdout от тестов и детализация
# --cov=app: считать покрытие для директории app
# --cov-report=term-missing: показывать строки, не покрытые тестами
# -ra: показывать доп. инфо по всем тестам (не только упавшим)
addopts = -sv --cov=app --cov-report=term-missing -ra  # Покрытие кода

; pythonpath = .  # Чтобы импортировать `app` из тестов

# Директории для поиска тестов
testpaths = tests  # Папка с тестами

# Переменные окружения для тестов
# Устанавливаем режим тестирования и используем тестовую БД
env =
    TESTING=True
    # Можно переопределить TEST_DB_URL здесь, если нужно
    # TEST_DB_URL=sqlite+aiosqlite:///./specific_test.db
    # Добавьте другие переменные, специфичные для тестов, если они нужны

# Настройки маркеров (если используете)
# markers =
#     slow: marks tests as slow (deselect with '-m "not slow"')
#     integration: marks integration tests

# Отключить warning'и от asyncio, если они мешают
# filterwarnings =
#     ignore::DeprecationWarning

# Указание асинхронного режима для pytest-asyncio (если используете его явно)
# asyncio_mode = auto  # Поддержка async/await