# –°–µ—Ä–≤–∏—Å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –º–∏–∫—Ä–æ–±–ª–æ–≥–æ–≤ üöÄ

![Python](https://img.shields.io/badge/Python-3.12-blueviolet) ![FastAPI](https://img.shields.io/badge/FastAPI-0.115-success) ![SQLAlchemy](https://img.shields.io/badge/SQLAlchemy-2.0-orange) 
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-17-blue) ![Nginx](https://img.shields.io/badge/Nginx-1.27-brightgreen)

–ë—ç–∫–µ–Ω–¥ –¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –º–∏–∫—Ä–æ–±–ª–æ–≥–æ–≤, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ Python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI, SQLAlchemy –∏ PostgreSQL.

## üìù –û–±–∑–æ—Ä

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –±—ç–∫–µ–Ω–¥-—á–∞—Å—Ç—å –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ –º–∏–∫—Ä–æ–±–ª–æ–≥–æ–≤. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è ("—Ç–≤–∏—Ç—ã"), –ø–æ–¥–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏ –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –ª–µ–Ω—Ç—É –Ω–æ–≤–æ—Å—Ç–µ–π –æ—Ç —Ç–µ—Ö, –Ω–∞ –∫–æ–≥–æ –æ–Ω–∏ –ø–æ–¥–ø–∏—Å–∞–Ω—ã.

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
*   **Nginx** (`nginx` —Å–µ—Ä–≤–∏—Å) –≤—ã—Å—Ç—É–ø–∞–µ—Ç –≤ —Ä–æ–ª–∏ –≤—Ö–æ–¥–Ω–æ–π —Ç–æ—á–∫–∏ (—Ä–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏), —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 8000 (HTTP, —Å —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º –Ω–∞ HTTPS) –∏ –ø–æ—Ä—Ç 8443 (HTTPS) –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω–µ. –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:
    *   –û–±–µ—Å–ø–µ—á–µ–Ω–∏–µ **HTTPS (SSL/TLS)** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ).
    *   –£—Å—Ç–∞–Ω–æ–≤–∫—É **Security Headers** –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
    *   –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ **Rate Limiting** –¥–ª—è –∑–∞—â–∏—Ç—ã API –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å-–∞—Ç–∞–∫.
    *   –†–∞–∑–¥–∞—á—É —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–∏–∑ `src/static/`).
    *   –†–∞–∑–¥–∞—á—É –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ (–∏–∑ `/media/`).
    *   –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö API-–∑–∞–ø—Ä–æ—Å–æ–≤ (–Ω–∞—á–∏–Ω–∞—é—â–∏—Ö—Å—è —Å `/api/`), –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (`/docs`, `/redoc`) –∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –º–µ—Ç—Ä–∏–∫ (`/metrics`) –Ω–∞ –±—ç–∫–µ–Ω–¥-—Å–µ—Ä–≤–∏—Å FastAPI.
*   **FastAPI** (`web` —Å–µ—Ä–≤–∏—Å) —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º Uvicorn, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ API-–∑–∞–ø—Ä–æ—Å—ã (`/api/...`), –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö PostgreSQL —á–µ—Ä–µ–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π SQLAlchemy –∏ Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π. –ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –æ—Ç **non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** (`appuser`) –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å **Sentry** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ `SENTRY_DSN`).
*   **PostgreSQL** (`db` —Å–µ—Ä–≤–∏—Å) —Ö—Ä–∞–Ω–∏—Ç –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. API-–∫–ª—é—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ **—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ** (Argon2 + SHA256 –¥–ª—è –ø–æ–∏—Å–∫–∞).
*   **Init-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** (`media-initializer` —Å–µ—Ä–≤–∏—Å) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–æ–º–∞ —Å –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.
*   **Prometheus** (`prometheus` —Å–µ—Ä–≤–∏—Å) —Å–æ–±–∏—Ä–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ —Å FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/metrics`).
*   **Grafana** (`grafana` —Å–µ—Ä–≤–∏—Å) –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏, —Å–æ–±—Ä–∞–Ω–Ω—ã–µ Prometheus. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —Å Prometheus –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –¥–∞–Ω–Ω—ã—Ö.
*   –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤–Ω–µ—à–Ω–µ–π, –±—ç–∫–µ–Ω–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–º `api-key` –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ API, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–æ —Ö–µ—à—É –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.
*   –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –æ—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é **Docker Compose**.


## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API (`/api/...`)

*   **–¢–≤–∏—Ç—ã:**
    *   –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–≤–∏—Ç–∞ (—Å —Ç–µ–∫—Å—Ç–æ–º –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏).
    *   –£–¥–∞–ª–µ–Ω–∏–µ *—Å–≤–æ–µ–≥–æ* —Ç–≤–∏—Ç–∞ (—Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–µ–¥–∏–∞—Ñ–∞–π–ª—ã —Ç–∞–∫–∂–µ —É–¥–∞–ª—è—é—Ç—Å—è).
*   **–õ–∞–π–∫–∏:**
    *   –ü–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç–º–µ—Ç–∫–∏ "–ù—Ä–∞–≤–∏—Ç—Å—è" —Ç–≤–∏—Ç—É.
    *   –°–Ω—è—Ç–∏–µ –æ—Ç–º–µ—Ç–∫–∏ "–ù—Ä–∞–≤–∏—Ç—Å—è".
*   **–ü–æ–¥–ø–∏—Å–∫–∏:**
    *   –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    *   –û—Ç–ø–∏—Å–∫–∞ –æ—Ç –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
*   **–õ–µ–Ω—Ç–∞:**
    *   –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–µ–Ω—Ç—ã —Ç–≤–∏—Ç–æ–≤ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–¥–ø–∏—Å–∞–Ω —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∏ —Å–≤–æ–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ç–≤–∏—Ç–æ–≤.
    *   –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ª–µ–Ω—Ç—ã –ø–æ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–∞–π–∫–æ–≤).
*   **–ü—Ä–æ—Ñ–∏–ª–∏:**
    *   –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–≤–æ–µ–º –ø—Ä–æ—Ñ–∏–ª–µ (–ø–æ–¥–ø–∏—Å—á–∏–∫–∏, –ø–æ–¥–ø–∏—Å–∫–∏).
    *   –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ—Ñ–∏–ª–µ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.
*   **–ú–µ–¥–∏–∞:**
    *   –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (`POST /api/medias`) –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è –∫ —Ç–≤–∏—Ç–∞–º.

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

*   **HTTPS:** –í–µ—Å—å —Ç—Ä–∞—Ñ–∏–∫ —à–∏—Ñ—Ä—É–µ—Ç—Å—è (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç).
*   **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API-–∫–ª—é—á–µ–π:** –ö–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ë–î –≤ –≤–∏–¥–µ —Ö–µ—à–µ–π (Argon2 + SHA256).
*   **Rate Limiting:** Nginx –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–¥–±–æ—Ä–∞ –∫–ª—é—á–µ–π.
*   **Security Headers:** Nginx —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ X-Frame-Options, X-Content-Type-Options, Referrer-Policy, HSTS –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –≤–µ–±-–∞—Ç–∞–∫.
*   **Non-root –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:** –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ FastAPI —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏.
*   **–ê—É–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** –í CI/CD –ø–∞–π–ø–ª–∞–π–Ω –≤–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ –∏–∑–≤–µ—Å—Ç–Ω—ã–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ (`pip-audit`).
*   **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –û—à–∏–±–æ–∫:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sentry (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —á–µ—Ä–µ–∑ `SENTRY_DSN`) –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫.
*   **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ú–µ—Ç—Ä–∏–∫:** –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é **Prometheus** –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤ **Grafana**.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **–Ø–∑—ã–∫:** Python 3.12
*   **–í–µ–±-—Å–µ—Ä–≤–µ—Ä/–ü—Ä–æ–∫—Å–∏:** Nginx (+ OpenSSL –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫:** FastAPI
*   **ASGI —Å–µ—Ä–≤–µ—Ä:** Uvicorn
*   **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL 17
*   **ORM:** SQLAlchemy 2.0 (async)
*   **–î—Ä–∞–π–≤–µ—Ä –ë–î:** psycopg3 (binary)
*   **–ú–∏–≥—Ä–∞—Ü–∏–∏:** Alembic
*   **–•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ:** Passlib (Argon2)
*   **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** Pydantic V2
*   **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** Loguru
*   **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** Sentry SDK, Prometheus, Grafana 
*   **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** Pytest, pytest-asyncio, pytest-cov, httpx
*   **–õ–∏–Ω—Ç–∏–Ω–≥/–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** Ruff
*   **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** Mypy
*   **–ê—É–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** pip-audit
*   **CI/CD:** GitHub Actions
*   **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è:** Docker, Docker Compose
*   **–ü—Ä–æ—á–µ–µ:** aiofiles, pre-commit, python-multipart, python-dotenv, su-exec


## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ ci-cd.yml           # GitHub Actions CI/CD
‚îÇ
‚îú‚îÄ‚îÄ alembic/                    # Alembic –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ
‚îú‚îÄ‚îÄ docker/                     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ Dockerfiles –¥–ª—è —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ media_init/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sample_media/       # –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile          # Dockerfile –¥–ª—è init-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–µ–¥–∏–∞
‚îÇ   ‚îú‚îÄ‚îÄ monitoring/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ grafana/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboards/     # JSON —Ñ–∞–π–ª—ã –¥–∞—à–±–æ—Ä–¥–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ provisioning/   # –§–∞–π–ª—ã –∞–≤—Ç–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Grafana (datasources, dashboards)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prometheus/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ prometheus.yml  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
‚îÇ   ‚îú‚îÄ‚îÄ nginx/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile          # Dockerfile –¥–ª—è Nginx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ entrypoint.sh       # –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –∏ –∑–∞–ø—É—Å–∫–∞ Nginx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ nginx.conf          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx
‚îÇ   ‚îî‚îÄ‚îÄ web/
‚îÇ       ‚îú‚îÄ‚îÄ Dockerfile          # Dockerfile –¥–ª—è FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ       ‚îî‚îÄ‚îÄ entrypoint.sh       # –°–∫—Ä–∏–ø—Ç —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ web —Å–µ—Ä–≤–∏—Å–∞ (–º–∏–≥—Ä–∞—Ü–∏–∏, chown, –∑–∞–ø—É—Å–∫ uvicorn)
‚îÇ
‚îú‚îÄ‚îÄ src/                        # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ api/                    # API —Å–ª–æ–π (—Ä–æ—É—Ç—ã, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
‚îÇ   ‚îú‚îÄ‚îÄ core/                   # –Ø–¥—Ä–æ (–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ë–î, –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ sentry)
‚îÇ   ‚îú‚îÄ‚îÄ models/                 # –ú–æ–¥–µ–ª–∏ SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ repositories/           # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (—Å–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º)
‚îÇ   ‚îú‚îÄ‚îÄ schemas/                # –°—Ö–µ–º—ã Pydantic (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ services/               # –°–µ—Ä–≤–∏—Å—ã (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ   ‚îú‚îÄ‚îÄ static/                 # –°—Ç–∞—Ç–∏–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (—Ä–∞–∑–¥–∞–µ—Ç—Å—è Nginx)
‚îÇ   ‚îî‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ tests/                      # –¢–µ—Å—Ç—ã (unit, integration)
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py             # –û–±—â–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ (–æ–±—ä–µ–∫—Ç—ã –º–æ–¥–µ–ª–µ–π –∏ –¥—Ä.)
‚îÇ   ‚îú‚îÄ‚îÄ integration/            
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/                # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/               # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —è–¥—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ—à–∏–±–∫–∏)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ conftest.py         # –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ (–ë–î, HTTP-–∫–ª–∏–µ–Ω—Ç –∏ –¥—Ä.)
‚îÇ   ‚îî‚îÄ‚îÄ unit/                  
‚îÇ       ‚îú‚îÄ‚îÄ core/               # Unit-—Ç–µ—Å—Ç—ã —è–¥—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–µ—Å—Å–∏–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, sentry)
‚îÇ       ‚îú‚îÄ‚îÄ dependencies/       # Unit-—Ç–µ—Å—Ç—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ repositories/       # Unit-—Ç–µ—Å—Ç—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
‚îÇ       ‚îú‚îÄ‚îÄ routes/             # Unit-—Ç–µ—Å—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Ä–æ—É—Ç–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ services/           # Unit-—Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)
‚îÇ       ‚îî‚îÄ‚îÄ conftest.py         # –§–∏–∫—Å—Ç—É—Ä—ã –¥–ª—è unit-—Ç–µ—Å—Ç–æ–≤ (–º–æ–∫–∏)
‚îÇ
‚îú‚îÄ‚îÄ .dockerignore               # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã Docker –ø—Ä–∏ —Å–±–æ—Ä–∫–µ
‚îú‚îÄ‚îÄ .env.example                # –®–∞–±–ª–æ–Ω —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .gitignore                  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã Git
‚îú‚îÄ‚îÄ .pre-commit-config.yaml     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Pre-commit
‚îú‚îÄ‚îÄ alembic.ini                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–æ—Å–Ω–æ–≤–Ω–æ–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä)
‚îú‚îÄ‚îÄ pytest.ini                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Pytest
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è Production
‚îú‚îÄ‚îÄ requirements-dev.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤
‚îî‚îÄ‚îÄ README.md                   # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –ó–∞–ø—É—Å–∫

–î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è **Docker** –∏ **Docker Compose**.

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/Nicksok2413/CorporateMicroblog
    cd CorporateMicroblog
    ```

2.  **–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
    –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env.example` –≤ `.env`:
    ```bash
    cp .env.example .env
    ```
    **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`**, —É–∫–∞–∑–∞–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
    –†–µ–∂–∏–º—ã `TESTING` –∏ `DEBUG` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å `False` –¥–ª—è production.
    **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):** –ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –æ—à–∏–±–æ–∫ –≤ Sentry, —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `SENTRY_DSN`, —É–∫–∞–∑–∞–≤ DSN –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ Sentry. –ï—Å–ª–∏ `SENTRY_DSN` –Ω–µ –∑–∞–¥–∞–Ω, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Sentry –±—É–¥–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∞.

3.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é Docker Compose:**
    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–±–µ—Ä–µ—Ç –æ–±—Ä–∞–∑—ã (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã. Nginx –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å –ø–æ—Ä—Ç **8000** (HTTP, —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ HTTPS) –∏ **8443** (HTTPS) –Ω–∞ –≤–∞—à–µ–º —Ö–æ—Å—Ç–µ.
    –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–∏—Å–∞ `media-initializer` (–æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è).
    –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Nginx –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç.
    –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–∏—Å–∞ `web`.
    ```bash
    docker-compose up -d --build
    ```
    *   –§–ª–∞–≥ `-d` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.
    *   –§–ª–∞–≥ `--build` –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∏–ª–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ `Dockerfile` –∏–ª–∏ –∫–æ–¥–µ).
    *   –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≤—Ä–µ–º—è.

4.  **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
    *   –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `https://localhost:8443`.
    *   HTTP (`http://localhost:8000`) –±—É–¥–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å –Ω–∞ HTTPS (`https://localhost:8443`).
    *   –í–æ–∑–º–æ–∂–Ω–æ –±—Ä–∞—É–∑–µ—Ä –≤—ã–¥–∞—Å—Ç **–ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** –∏–∑-–∑–∞ —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞. –ü—Ä–∏–º–∏—Ç–µ –µ–≥–æ ("–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å", "–î–æ–≤–µ—Ä—è—Ç—å" –∏ —Ç.–ø.), —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å.
    *   –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger UI) –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `https://localhost:8443/docs`.
    *   –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (ReDoc) –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `https://localhost:8443/redoc`.

5.  **–û—Å—Ç–∞–Ω–æ–≤–∫–∞:**
    –î–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
    ```bash
    docker-compose down
    ```
    –ß—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å —Ç–æ–º–∞ (volumes) —Å –¥–∞–Ω–Ω—ã–º–∏ PostgreSQL, –º–µ–¥–∏–∞, –ª–æ–≥–∞–º–∏ –∏ –¥—Ä.:
    ```bash
    docker-compose down -v
    ```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

*   **–ú–µ—Ç—Ä–∏–∫–∏ Prometheus:** `http://localhost:9090`. –°–±–æ—Ä —Å `/metrics` —Å–µ—Ä–≤–∏—Å–∞ `web`.
*   **Grafana UI:** `http://localhost:3000`  (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `admin`/`admin`).
*   **–û—à–∏–±–∫–∏ Sentry:** –ï—Å–ª–∏ `SENTRY_DSN` —É–∫–∞–∑–∞–Ω –≤ `.env`.

## üîë –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

–í—Å–µ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (`/api/...`) —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ–¥–∞—á–∏ **–∏—Å—Ö–æ–¥–Ω–æ–≥–æ** (–Ω–µ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ) API-–∫–ª—é—á–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–µ `api-key`. –ë—ç–∫–µ–Ω–¥ —Å–∞–º –≤—ã–ø–æ–ª–Ω–∏—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ö–µ—à–µ–π.

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ UI (`/`):

1.  –í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É —Ñ–æ—Ä–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ API-–∫–ª—é—á–∞.
2.  –í –ø–æ–ª–µ `'api-key —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è'` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å—Ç–æ–∏—Ç API-–∫–ª—é—á —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `test` (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Nick).
3.  –î–ª—è –≤—Ö–æ–¥–∞ –ø–æ–¥ –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤–≤–µ–¥–∏—Ç–µ API-–∫–ª—é—á –æ–¥–Ω–æ–≥–æ –∏–∑ —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å–º. –Ω–∏–∂–µ) –∏ –Ω–∞–∂–º–∏—Ç–µ `'–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–æ–≤—ã–π api-key'`.

–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `curl`:
```bash
curl -k -X GET "https://localhost:8443/api/users/me" \
     -H "accept: application/json" \
     -H "api-key: test_api_key_value"

# –§–ª–∞–≥ -k –Ω—É–∂–µ–Ω –¥–ª—è curl, —á—Ç–æ–±—ã –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫—É —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
```

### –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –º–∏–≥—Ä–∞—Ü–∏–π —Å–æ–∑–¥–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:

| –ò–º—è               | ID | API –ö–ª—é—á (`api-key`) | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                   |
|:------------------|:--:|:---------------------|:-----------------------------|
| Nick              | 1  | `test`               | –ò–º–µ–µ—Ç —Ç–≤–∏—Ç—ã, –ø–æ–¥–ø–∏—Å–∫–∏, –ª–∞–π–∫–∏ |
| Alice             | 2  | `alice_key`          | –ò–º–µ–µ—Ç —Ç–≤–∏—Ç—ã, –ø–æ–¥–ø–∏—Å–∫–∏, –ª–∞–π–∫–∏ |
| Bob               | 3  | `bob_key`            | –ò–º–µ–µ—Ç —Ç–≤–∏—Ç—ã, –ø–æ–¥–ø–∏—Å–∫–∏, –ª–∞–π–∫–∏ |
| Charlie           | 4  | `charlie_key`        | –ò–º–µ–µ—Ç —Ç–≤–∏—Ç—ã, –ø–æ–¥–ø–∏—Å–∫–∏, –ª–∞–π–∫–∏ |
| David (no tweets) | 5  | `david_key`          | –ë–µ–∑ —Ç–≤–∏—Ç–æ–≤                   |

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∫–æ–ª–æ–Ω–∫–∏ "API –ö–ª—é—á" –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç –∏–º–µ–Ω–∏ –Ω—É–∂–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

*–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –°–∞–º–∏ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Ö–µ—à–µ–π.*

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö SQLite –≤ –ø–∞–º—è—Ç–∏ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ Docker Compose.
–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

1.  **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç):**
    ```bash
    python -m venv .venv
    source .venv/bin/activate  # Linux/macOS
    # .venv\Scripts\activate  # Windows
    ```

2.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    pip install -r requirements-dev.txt
    ```

3. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`, —É–∫–∞–∑–∞–≤ `TESTING`=`True`.
   –î–ª—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∂–∏–º –æ—Ç–ª–∞–¥–∫–∏: `DEBUG`=`True`.

4.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã:**
    ```bash
    pytest
    ```
    –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å—Ç–∏—Ç –≤—Å–µ —Ç–µ—Å—Ç—ã (unit –∏ integration). 

5.  **–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏:**
    ```bash
    pytest --cov=src --cov-report term-missing -vv
    ```
6.  **–ê—É–¥–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
    ```bash
    pip-audit
    ```


## üßπ –õ–∏–Ω—Ç–∏–Ω–≥ –∏ –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–î–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `pre-commit` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º.
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Ruff`.
–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `mypy`.
–ó–∞–ø—É—Å–∫–∞–π—Ç–µ –≤ –∞–∫—Ç–∏–≤–Ω–æ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

**–ù–∞—Å—Ç—Ä–æ–π–∫–∞ `pre-commit` (–µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ –ø–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è):**
1.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—ã –≤ –∞–∫—Ç–∏–≤–Ω–æ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏.
2.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã):
    ```bash
    pip install -r requirements-dev.txt
    ```
3.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Git —Ö—É–∫–∏:
    ```bash
    pre-commit install
    ```
–¢–µ–ø–µ—Ä—å `ruff` –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º `git commit`.

**–†—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ `pre-commit`:**
*   –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö pre-commit —Ö—É–∫–æ–≤ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö:
    ```bash
    pre-commit run
    ```
*   –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö pre-commit —Ö—É–∫–æ–≤ –Ω–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö:
    ```bash
    pre-commit run --all-files
    ```

**`Ruff`**
1.  **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
    ```bash
    ruff check .
    ```
2.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ + –∞–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
    ```bash
    ruff check . --fix
    ```

3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
    ```bash
    ruff format . --check
    ```

4.  **–ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
    ```bash
    ruff format .
    ```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ —Å `mypy`:**
```bash
mypy src
```

## üíæ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö

–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Alembic`.

*   **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ `web` —Å –ø–æ–º–æ—â—å—é `entrypoint.sh`.
*   **–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ (–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –º–æ–¥–µ–ª–µ–π SQLAlchemy):**
    ```bash
    # –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–∏—Å –ë–î –∑–∞–ø—É—â–µ–Ω (docker-compose up -d db)
    # –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –≤ –∞–∫—Ç–∏–≤–Ω–æ–º venv —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
    alembic revision --autogenerate -m "–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
    ```
    –ü–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ **–≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ** —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ `alembic/versions/` –ø–µ—Ä–µ–¥ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º.
*   **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –≤—Ä—É—á–Ω—É—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):**
    ```bash
    # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π
    alembic upgrade head
    # –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
    alembic downgrade -1
    # –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é
    alembic history
    ```

---

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞!
